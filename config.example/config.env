# =============================================================================
# Pylon config.env
# =============================================================================
#
# Scripts run on the same host as the service (North on North, South on South).
# PYLON_MODE: north | south | full — set by setup.
#
# See docs/LQS-IoT_PYLON_DEPLOYMENT_MODES.md for the 4 deployment scenarios.
# =============================================================================

# -----------------------------------------------------------------------------
# Docker network (Pylon owns this; no Odoo compose changes needed)
# -----------------------------------------------------------------------------
PYLON_NETWORK_NAME=pylon-net

# -----------------------------------------------------------------------------
# North (Orion + MongoDB)
# -----------------------------------------------------------------------------
ORION_PORT=1026
ORION_VERSION=4.1.0

MONGO_DB_PORT=27017
MONGO_DB_VERSION=6.0

ORION_LOG_LEVEL=DEBUG

# Odoo — Orion sends deviceStatus updates here. Set by deployment scenario:
#   Scenario 1,2: host.docker.internal (Odoo same host, via host published port)
#   Scenario 3,4: Odoo host IP
# Linux: host.docker.internal works (North compose adds extra_hosts).
# WSL2: same as Linux when Docker runs in WSL2.
ODOO_HOST=host.docker.internal
ODOO_PORT=8069

# -----------------------------------------------------------------------------
# South (IoT Agent)
# -----------------------------------------------------------------------------
IOTA_JSON_VERSION=3.7.0
IOTA_NORTH_PORT=4041
IOTA_SOUTH_PORT=7896

# IOTA connects to Orion and Mongo:
#   Scenario 1,3: orion, mongo-db (same host)
#   Scenario 2,4: North host IP
IOTA_CB_HOST=orion
IOTA_MONGO_HOST=mongo-db

# IOTA transport: HTTP only (no MQTT/AMQP)
IOTA_MQTT_DISABLED=true
IOTA_AMQP_DISABLED=true

# IOTA tuning
IOTA_LOG_LEVEL=DEBUG
IOTA_TIMESTAMP=true
IOTA_REGISTRY_TYPE=mongodb
IOTA_MONGO_DB=iotagentjson

# -----------------------------------------------------------------------------
# FIWARE tenant (Orion: alphanumeric + underscore only, no hyphen)
# -----------------------------------------------------------------------------
FIWARE_SERVICE=lqs_iot
FIWARE_SERVICEPATH=/
HEADER_CONTENT_TYPE="Content-Type: application/json"
HEADER_FIWARE_SERVICE="fiware-service: ${FIWARE_SERVICE}"
HEADER_FIWARE_SERVICEPATH="fiware-servicepath: ${FIWARE_SERVICEPATH}"
